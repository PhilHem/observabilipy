{"id":"observabilipy-1xi","title":"Refactor: Extract Generic[T] base for in-memory storage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T10:42:17.331594+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:17:47.143452+01:00","closed_at":"2026-01-15T14:17:47.143452+01:00","close_reason":"Work migrated to observabilipy-2ph.13 (hierarchical structure)"}
{"id":"observabilipy-23v","title":"Add write_sync() to InMemoryMetricsStorage/InMemoryLogStorage","description":"## Problem\n\n`InMemoryMetricsStorage` and `InMemoryLogStorage` only have async `write()` method.\nAdapters that use these storage classes (like `ObservabilipyObservability` in sunsoric_backend)\ncheck for `write_sync()` to enable synchronous writes, but fall back to async fire-and-forget\nwhen it's missing.\n\nThis causes the same race condition as EventObservability had - tests check storage before\nwrites complete under pytest-xdist.\n\n## Related\n\n- Fixed for EventObservability in 1.3.1 via `sync=True` parameter\n- `ObservabilipyObservability` adapter uses `hasattr(storage, 'write_sync')` check\n\n## Proposed Solution\n\nAdd `write_sync()` method to in-memory storage classes:\n\n```python\nclass InMemoryMetricsStorage:\n    def write_sync(self, sample: MetricSample) -\u003e None:\n        \"\"\"Synchronous write for testing contexts.\"\"\"\n        self._samples.append(sample)\n\n    def write_sync_batch(self, samples: list[MetricSample]) -\u003e None:\n        \"\"\"Synchronous batch write for testing contexts.\"\"\"\n        self._samples.extend(samples)\n```\n\nSame for `InMemoryLogStorage`.\n\n## Acceptance Criteria\n\n- [ ] `InMemoryMetricsStorage.write_sync()` writes directly to `_samples`\n- [ ] `InMemoryMetricsStorage.write_sync_batch()` writes multiple samples\n- [ ] `InMemoryLogStorage.write_sync()` writes directly to `_entries`\n- [ ] Tests can use `ObservabilipyObservability` adapter without race conditions","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-15T10:17:41.402023+01:00","created_by":"philipphematty","updated_at":"2026-01-15T10:25:28.046858+01:00","closed_at":"2026-01-15T10:25:28.046858+01:00","close_reason":"Added write_sync() and write_sync_batch() to InMemoryLogStorage and InMemoryMetricsStorage"}
{"id":"observabilipy-2ph","title":"Architecture Review Cleanup (Jan 2026)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-15T11:39:02.358262+01:00","created_by":"philipphematty","updated_at":"2026-01-15T21:30:01.628993+01:00","closed_at":"2026-01-15T21:30:01.628993+01:00","close_reason":"All 20 architecture cleanup tasks completed","dependencies":[{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.1","type":"blocks","created_at":"2026-01-15T11:39:26.990527+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.2","type":"blocks","created_at":"2026-01-15T11:39:27.026725+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.3","type":"blocks","created_at":"2026-01-15T11:39:27.061063+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.4","type":"blocks","created_at":"2026-01-15T11:39:27.095882+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.5","type":"blocks","created_at":"2026-01-15T11:39:27.133366+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.6","type":"blocks","created_at":"2026-01-15T11:39:27.168775+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.7","type":"blocks","created_at":"2026-01-15T11:39:27.205458+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.8","type":"blocks","created_at":"2026-01-15T13:04:33.339354+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.9","type":"blocks","created_at":"2026-01-15T13:04:33.373958+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.10","type":"blocks","created_at":"2026-01-15T13:04:33.405843+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.11","type":"blocks","created_at":"2026-01-15T14:37:27.346303+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.12","type":"blocks","created_at":"2026-01-15T14:37:27.380274+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.13","type":"blocks","created_at":"2026-01-15T14:37:27.419979+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.14","type":"blocks","created_at":"2026-01-15T14:37:27.454921+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.15","type":"blocks","created_at":"2026-01-15T20:51:56.588429+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.16","type":"blocks","created_at":"2026-01-15T20:51:56.662141+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.17","type":"blocks","created_at":"2026-01-15T20:51:56.739511+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.18","type":"blocks","created_at":"2026-01-15T20:51:56.812297+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.19","type":"blocks","created_at":"2026-01-15T20:51:56.879145+01:00","created_by":"daemon"},{"issue_id":"observabilipy-2ph","depends_on_id":"observabilipy-2ph.20","type":"blocks","created_at":"2026-01-15T20:51:56.951683+01:00","created_by":"daemon"}]}
{"id":"observabilipy-2ph.1","title":"Delete duplicate dashboard_metrics.py","description":"Delete examples/dashboard_metrics.py which duplicates dashboard_metrics_collector.py. Update any imports.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T11:39:04.910964+01:00","created_by":"philipphematty","updated_at":"2026-01-15T11:47:48.732049+01:00","closed_at":"2026-01-15T11:47:48.732049+01:00","close_reason":"Closed"}
{"id":"observabilipy-2ph.10","title":"Extract async/sync connection context managers to SQLiteStorageBase","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T13:04:08.020697+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:14:19.818995+01:00","closed_at":"2026-01-15T14:14:19.818995+01:00","close_reason":"Extracted async_connection() and sync_connection() context managers to SQLiteStorageBase, replacing 13 repetitive try/finally blocks across SQLiteLogStorage and SQLiteMetricsStorage"}
{"id":"observabilipy-2ph.11","title":"Add clear()/clear_sync() to in-memory storage classes","description":"Tests in test_examples.py directly access internal _entries.clear() and _samples.clear() instead of using public methods. Add public methods to both InMemoryLogStorage and InMemoryMetricsStorage.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T14:17:25.097627+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:50:42.812583+01:00","closed_at":"2026-01-15T20:50:42.812583+01:00","close_reason":"Already implemented - verified with passing tests"}
{"id":"observabilipy-2ph.12","title":"Add write_sync()/clear_sync() to port interfaces","description":"Add write_sync(), clear(), and clear_sync() methods to LogStoragePort and MetricsStoragePort interfaces and implement in all adapters.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T14:17:25.364606+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:50:42.823001+01:00","closed_at":"2026-01-15T20:50:42.823001+01:00","close_reason":"Already implemented - verified with passing tests"}
{"id":"observabilipy-2ph.13","title":"Extract Generic[T] base for in-memory storage","description":"Extract Generic[T] base class InMemoryStorage for in-memory storage adapters to reduce duplication and improve type safety.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T14:17:25.642579+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:50:42.82797+01:00","closed_at":"2026-01-15T20:50:42.82797+01:00","close_reason":"Already implemented - verified with passing tests"}
{"id":"observabilipy-2ph.14","title":"Fix EventObservability.record() race condition with sync parameter","description":"Add sync: bool = False parameter to EventObservability to avoid race conditions when called from sync code in async contexts. This fixes pytest-xdist parallel execution issues.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T14:17:32.633601+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:50:42.831461+01:00","closed_at":"2026-01-15T20:50:42.831461+01:00","close_reason":"Already implemented - verified with passing tests"}
{"id":"observabilipy-2ph.15","title":"Implement factory pattern for SQLite storage adapters","description":"sqlite_logs.py and sqlite_metrics.py share ~100 lines of duplicated patterns (write/read/clear logic). Create a parameterized factory to generate domain-specific SQLite storage classes, reducing duplication while keeping schema/query differences explicit. Estimated effort: 2-3 hours.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T14:44:46.184466+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:26.869101+01:00","closed_at":"2026-01-15T15:06:26.869101+01:00","close_reason":"Implemented SQLiteStorageOperations mixin in sqlite_base.py to consolidate common async/sync patterns. Both sqlite_logs.py and sqlite_metrics.py now inherit from the mixin."}
{"id":"observabilipy-2ph.16","title":"Extract log-level filtering to domain service","description":"Level filtering logic is scattered across storage adapters (read() with level param, count_by_level(), delete_by_level_before()). Extract to LogStorageWithLevelFilter domain service wrapper to keep adapters thin and move domain logic to domain layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T14:44:49.403768+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:28.207947+01:00","closed_at":"2026-01-15T15:06:28.207947+01:00","close_reason":"Created LogStorageWithLevelFilter service in core/services.py with 16 unit tests. Provides level-based filtering as domain service wrapper."}
{"id":"observabilipy-2ph.17","title":"Add async-to-sync wrapper utility for storage adapters","description":"Every storage adapter duplicates async/sync method pairs (~80 lines). Create async_to_sync_wrapper utility to auto-generate sync methods. Note: Must handle AsyncIterable vs list return type divergence carefully.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T14:44:52.066249+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:29.188332+01:00","closed_at":"2026-01-15T15:06:29.188332+01:00","close_reason":"Created async_sync.py utility module with run_sync() and collect_async_iterable() helpers. Added 7 unit tests."}
{"id":"observabilipy-2ph.18","title":"Extract temp path fixtures to tests/conftest.py","description":"Temp path fixtures (log_db_path, metrics_db_path) are duplicated across 4 test files: e2e/conftest.py, test_sqlite_log_storage.py, test_sqlite_metrics_storage.py, test_sqlite_storage_sync.py. Extract to central tests/conftest.py.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-15T14:44:55.389199+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:30.142614+01:00","closed_at":"2026-01-15T15:06:30.142614+01:00","close_reason":"Extracted log_db_path and metrics_db_path fixtures to tests/conftest.py. Removed duplicates from 4 test files."}
{"id":"observabilipy-2ph.19","title":"Extract memory storage fixtures to tests/integration/conftest.py","description":"memory_log_storage and memory_metrics_storage fixtures are duplicated in test_sqlite_log_storage.py and test_sqlite_metrics_storage.py. Extract to tests/integration/conftest.py.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-15T14:44:58.501997+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:31.078915+01:00","closed_at":"2026-01-15T15:06:31.078915+01:00","close_reason":"Created tests/integration/conftest.py with memory_log_storage and memory_metrics_storage fixtures. Removed duplicates from test files."}
{"id":"observabilipy-2ph.2","title":"Delete unused dashboard_app.py","description":"Delete examples/dashboard_app.py - unused factory function that duplicates dashboard_example.py","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T11:39:06.933998+01:00","created_by":"philipphematty","updated_at":"2026-01-15T11:47:48.738667+01:00","closed_at":"2026-01-15T11:47:48.738667+01:00","close_reason":"Closed"}
{"id":"observabilipy-2ph.20","title":"Extract shared example code to examples/shared.py","description":"Identical demo endpoint code (27 lines) in sqlite_example.py and embedded_runtime_example.py. Extract demo_root_endpoint() to examples/shared.py for consistency.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-15T14:45:01.389602+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:06:32.1893+01:00","closed_at":"2026-01-15T15:06:32.1893+01:00","close_reason":"Created examples/demo_helpers.py with shared demo endpoint logic. Updated both example files to use the shared code."}
{"id":"observabilipy-2ph.3","title":"Fix await on non-coroutine in dashboard_example.py","description":"Line 91-93 uses await on StructuredLogger.info() which returns LogEntry, not a coroutine. Remove the await or change to actually write to storage.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-15T11:39:09.601996+01:00","created_by":"philipphematty","updated_at":"2026-01-15T11:51:42.655482+01:00","closed_at":"2026-01-15T11:51:42.655482+01:00","close_reason":"Fixed await on non-coroutine: split logger.info() call into entry creation + await log_storage.write(entry)"}
{"id":"observabilipy-2ph.4","title":"Split test_sqlite_storage.py by storage type","description":"Split 709-line god file into test_sqlite_log_storage.py and test_sqlite_metrics_storage.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T11:39:12.082678+01:00","created_by":"philipphematty","updated_at":"2026-01-15T12:49:05.662594+01:00","closed_at":"2026-01-15T12:49:05.662594+01:00","close_reason":"Closed"}
{"id":"observabilipy-2ph.5","title":"Split test_in_memory_storage.py by storage type","description":"Split 593-line god file into test_in_memory_log_storage.py and test_in_memory_metrics_storage.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T11:39:14.358649+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:35:30.218702+01:00","closed_at":"2026-01-15T14:35:30.218702+01:00","close_reason":"Split 698-line test_in_memory_storage.py into 3 focused files: test_in_memory_storage_base.py (9 tests), test_in_memory_log_storage.py (28 tests), test_in_memory_metrics_storage.py (18 tests). All 55 tests preserved, 662 total suite tests pass."}
{"id":"observabilipy-2ph.6","title":"Split test_ring_buffer_storage.py by storage type","description":"Split 649-line god file into test_ring_buffer_log_storage.py and test_ring_buffer_metrics_storage.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T11:39:16.529703+01:00","created_by":"philipphematty","updated_at":"2026-01-15T21:02:47.803631+01:00","closed_at":"2026-01-15T21:02:47.803631+01:00","close_reason":"Split 649-line god file into test_ring_buffer_log_storage.py and test_ring_buffer_metrics_storage.py"}
{"id":"observabilipy-2ph.7","title":"Extract SQLite storage base class","description":"Extract common initialization patterns from sqlite_logs.py and sqlite_metrics.py into SQLiteStorageBase class to reduce ~100 lines of duplication","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-15T11:39:19.0586+01:00","created_by":"philipphematty","updated_at":"2026-01-15T12:59:15.189924+01:00","closed_at":"2026-01-15T12:59:15.189924+01:00","close_reason":"Extracted SQLiteStorageBase class with connection lifecycle management (async + sync). Reduced ~50 lines of duplication."}
{"id":"observabilipy-2ph.8","title":"Add error handling for JSON deserialization in SQLite adapters","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-15T13:04:03.61352+01:00","created_by":"philipphematty","updated_at":"2026-01-15T13:27:58.153829+01:00","closed_at":"2026-01-15T13:27:58.153829+01:00","close_reason":"Added JSON deserialization error handling in SQLite adapters (4 locations). Corrupted JSON now falls back to empty dict instead of crashing. Added 4 tests."}
{"id":"observabilipy-2ph.9","title":"Remove sqlite.py re-export wrapper","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T13:04:05.882553+01:00","created_by":"philipphematty","updated_at":"2026-01-15T13:48:03.897234+01:00","closed_at":"2026-01-15T13:48:03.897234+01:00","close_reason":"Removed sqlite.py re-export wrapper. Updated storage/__init__.py to import directly from sqlite_logs.py and sqlite_metrics.py. Updated 8 consumer files to use public API."}
{"id":"observabilipy-2yl","title":"Fix: Add write_sync()/clear_sync() to port interfaces","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T10:42:17.436413+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:17:45.460256+01:00","closed_at":"2026-01-15T14:17:45.460256+01:00","close_reason":"Work migrated to observabilipy-2ph.12 (hierarchical structure)"}
{"id":"observabilipy-77q","title":"BDD Step Definitions for Middleware","description":"Implement pytest-bdd step definitions for all middleware feature files.\n\nFeature files to cover:\n- request_logging.feature (6 scenarios)\n- request_metrics.feature (5 scenarios)\n- middleware_configuration.feature (6 scenarios)\n- context_propagation.feature (5 scenarios)\n- wsgi_middleware.feature (5 scenarios)\n- error_handling.feature (4 scenarios)\n\nTotal: 31 BDD scenarios across 6 feature files.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-15T22:20:48.837448+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:32:14.846085+01:00","closed_at":"2026-01-16T12:32:14.846085+01:00","close_reason":"All step definitions implemented (31 scenarios, 13 pass, 28 xfail)","dependencies":[{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:31.292525+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.2","type":"blocks","created_at":"2026-01-15T22:21:31.329447+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.3","type":"blocks","created_at":"2026-01-15T22:21:31.361562+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.4","type":"blocks","created_at":"2026-01-15T22:21:31.396516+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.5","type":"blocks","created_at":"2026-01-15T22:21:31.42889+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.6","type":"blocks","created_at":"2026-01-15T22:21:31.467256+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.7","type":"blocks","created_at":"2026-01-15T22:21:31.5033+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q","depends_on_id":"observabilipy-77q.8","type":"blocks","created_at":"2026-01-15T22:21:31.545977+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.1","title":"Create conftest.py with shared fixtures (storage, test apps)","description":"Create tests/features/middleware/conftest.py with:\n- Shared fixtures for in-memory storage (logs and metrics)\n- Test ASGI/WSGI application fixtures\n- Common step definitions for Given/When/Then patterns\n- Request/response capture utilities","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:20:55.364468+01:00","created_by":"philipphematty","updated_at":"2026-01-15T23:21:06.251036+01:00","closed_at":"2026-01-15T23:21:06.251036+01:00","close_reason":"Closed"}
{"id":"observabilipy-77q.2","title":"Implement step definitions for request_logging.feature","description":"Implement step definitions for 6 scenarios in request_logging.feature:\n- Logging HTTP requests\n- Logging response status codes\n- Logging request duration\n- Logging request headers\n- Logging request body (configurable)\n- Filtering log levels","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:08.39601+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.477597+01:00","closed_at":"2026-01-16T12:31:53.477597+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.2","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.691033+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.3","title":"Implement step definitions for request_metrics.feature","description":"Implement step definitions for 5 scenarios in request_metrics.feature:\n- Recording request count metrics\n- Recording request duration histograms\n- Adding custom labels to metrics\n- Recording response size metrics\n- Metric namespacing/prefixing","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:09.525066+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.483037+01:00","closed_at":"2026-01-16T12:31:53.483037+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.3","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.728901+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.4","title":"Implement step definitions for middleware_configuration.feature","description":"Implement step definitions for 6 scenarios in middleware_configuration.feature:\n- Default configuration behavior\n- Custom endpoint configuration\n- Path exclusion patterns\n- Enabling/disabling features\n- Custom metric names\n- Environment-based configuration","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:10.445476+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.48715+01:00","closed_at":"2026-01-16T12:31:53.48715+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.4","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.763633+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.5","title":"Implement step definitions for context_propagation.feature","description":"Implement step definitions for 5 scenarios in context_propagation.feature:\n- Request ID propagation\n- Trace context headers\n- Correlation ID injection\n- Context availability in handlers\n- Context cleanup after request","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:11.530992+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.489888+01:00","closed_at":"2026-01-16T12:31:53.489888+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.5","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.800591+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.6","title":"Implement step definitions for wsgi_middleware.feature","description":"Implement step definitions for 5 scenarios in wsgi_middleware.feature:\n- WSGI app wrapping\n- Request logging in WSGI\n- Metrics collection in WSGI\n- WSGI environ access\n- Flask/Django integration","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:12.946212+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.491296+01:00","closed_at":"2026-01-16T12:31:53.491296+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.6","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.851519+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.7","title":"Implement step definitions for error_handling.feature","description":"Implement step definitions for 4 scenarios in error_handling.feature:\n- Exception logging\n- Error metrics recording\n- Graceful degradation\n- Error response formatting","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:14.157995+01:00","created_by":"philipphematty","updated_at":"2026-01-16T12:31:53.49265+01:00","closed_at":"2026-01-16T12:31:53.49265+01:00","close_reason":"Step definitions implemented in conftest.py","dependencies":[{"issue_id":"observabilipy-77q.7","depends_on_id":"observabilipy-77q.1","type":"blocks","created_at":"2026-01-15T22:21:37.89292+01:00","created_by":"daemon"}]}
{"id":"observabilipy-77q.8","title":"Create test_middleware.py with scenarios() loader","description":"Create tests/features/middleware/test_middleware.py with:\n- scenarios() loader for all feature files\n- pytestmark for TRA markers (integration, middleware)\n- Any test-specific fixtures or configuration","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:15.193801+01:00","created_by":"philipphematty","updated_at":"2026-01-16T13:00:52.101076+01:00","closed_at":"2026-01-16T13:00:52.101076+01:00","close_reason":"Already implemented in test_middleware_bdd.py with scenarios() loader and TRA markers","dependencies":[{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.2","type":"blocks","created_at":"2026-01-15T22:21:43.154145+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.3","type":"blocks","created_at":"2026-01-15T22:21:43.197199+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.4","type":"blocks","created_at":"2026-01-15T22:21:43.237022+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.5","type":"blocks","created_at":"2026-01-15T22:21:43.273158+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.6","type":"blocks","created_at":"2026-01-15T22:21:43.305907+01:00","created_by":"daemon"},{"issue_id":"observabilipy-77q.8","depends_on_id":"observabilipy-77q.7","type":"blocks","created_at":"2026-01-15T22:21:43.342071+01:00","created_by":"daemon"}]}
{"id":"observabilipy-89g","title":"ASGI Architecture Review Findings","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-16T00:14:15.889765+01:00","created_by":"philipphematty","updated_at":"2026-01-16T13:00:17.148309+01:00","closed_at":"2026-01-16T13:00:17.148309+01:00","close_reason":"Addressed all findings: input validation, ASGI error handling, SQLite connection managers, pytest markers","dependencies":[{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.1","type":"blocks","created_at":"2026-01-16T00:15:03.716812+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.2","type":"blocks","created_at":"2026-01-16T00:15:03.759827+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.3","type":"blocks","created_at":"2026-01-16T00:15:03.795434+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.4","type":"blocks","created_at":"2026-01-16T00:15:03.833995+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.5","type":"blocks","created_at":"2026-01-16T00:15:03.872804+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.6","type":"blocks","created_at":"2026-01-16T00:15:03.908615+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.7","type":"blocks","created_at":"2026-01-16T00:15:03.942833+01:00","created_by":"daemon"},{"issue_id":"observabilipy-89g","depends_on_id":"observabilipy-89g.8","type":"blocks","created_at":"2026-01-16T00:15:03.982546+01:00","created_by":"daemon"}]}
{"id":"observabilipy-89g.1","title":"Add UTF-8 error handling to query string decoding in asgi.py","description":"Query string decode() in ASGI endpoints can fail with invalid UTF-8 sequences. Use decode(\"utf-8\", errors=\"replace\") to handle malformed input gracefully. Lines 125, 142 in asgi.py.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-16T00:14:19.146604+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.569657+01:00","closed_at":"2026-01-16T09:22:49.569657+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.2","title":"Add try-except error handling around encoding operations in asgi.py","description":"If encode_ndjson() or encode_logs() raises, the ASGI app crashes without sending error response. Wrap encoding calls in try-except to return 500 with error details.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-16T00:14:22.539305+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.577547+01:00","closed_at":"2026-01-16T09:22:49.577547+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.3","title":"Create pytest fixtures for test storage initialization in test_asgi_adapter.py","description":"Storage initialization pattern 'log_storage = InMemoryLogStorage(); metrics_storage = InMemoryMetricsStorage()' repeated 23+ times. Create '@pytest.fixture def test_storages()' and '@pytest.fixture def asgi_app(test_storages)'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T00:14:26.186364+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.582116+01:00","closed_at":"2026-01-16T09:22:49.582116+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.4","title":"Extract ASGI response sending helper _send_response()","description":"ASGI response sending pattern duplicated 6 times in asgi.py. Extract 'async def _send_response(send, status, headers, body)' helper.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T00:14:29.008131+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.585644+01:00","closed_at":"2026-01-16T09:22:49.585644+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.5","title":"Move generic ASGI fixtures to tests/conftest.py","description":"ASGI fixtures (basic_asgi_app, asgi_scope, asgi_send_capture) are in BDD conftest but used by unit tests via pytest_plugins. Move to root tests/conftest.py for proper discoverability.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T00:14:31.968748+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.589027+01:00","closed_at":"2026-01-16T09:22:49.589027+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.6","title":"Extract query parameter parsing helper _parse_query_params()","description":"Query parameter parsing pattern duplicated 2 times in asgi.py. Extract 'def _parse_query_params(scope: Scope) -\u003e dict[str, list[str]]'.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T00:14:34.931874+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.591929+01:00","closed_at":"2026-01-16T09:22:49.591929+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.7","title":"Document async/sync in-memory database separation in CLAUDE.md","description":"Sync and async code paths access separate :memory: databases, causing data consistency issues if both APIs are used. Document this limitation clearly.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T00:14:38.005608+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.593523+01:00","closed_at":"2026-01-16T09:22:49.593523+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-89g.8","title":"Remove unused Receive import from test_asgi_middleware.py","description":"Dead import at line 9-14. Quick cleanup.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-16T00:14:40.87408+01:00","created_by":"philipphematty","updated_at":"2026-01-16T09:22:49.594867+01:00","closed_at":"2026-01-16T09:22:49.594867+01:00","close_reason":"ASGI architecture review findings implemented"}
{"id":"observabilipy-c1y","title":"Middleware Configuration Options","description":"Configuration options for the auto-instrumentation middleware including path exclusion, custom headers, toggle controls, custom metric names, and path normalization.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-15T22:20:59.198653+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:20:59.198653+01:00","dependencies":[{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.1","type":"blocks","created_at":"2026-01-15T22:21:36.648643+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.2","type":"blocks","created_at":"2026-01-15T22:21:36.689395+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.3","type":"blocks","created_at":"2026-01-15T22:21:36.723905+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.4","type":"blocks","created_at":"2026-01-15T22:21:36.757043+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.5","type":"blocks","created_at":"2026-01-15T22:21:36.791041+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-c1y.6","type":"blocks","created_at":"2026-01-15T22:21:36.830547+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y","depends_on_id":"observabilipy-f2x","type":"blocks","created_at":"2026-01-15T22:21:42.301512+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.1","title":"Implement exclude_paths configuration with exact matching","description":"Add exclude_paths parameter to middleware config. When a request path exactly matches an entry in exclude_paths (e.g., '/health', '/metrics'), skip logging and metrics recording for that request.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:13.493989+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:34.853122+01:00","closed_at":"2026-01-16T14:23:34.853122+01:00","close_reason":"All config options implemented in ASGIObservabilityMiddleware","dependencies":[{"issue_id":"observabilipy-c1y.1","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:02.702695+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.2","title":"Implement wildcard path matching (fnmatch style)","description":"Extend exclude_paths to support fnmatch-style wildcards (e.g., '/api/v*/internal/*', '/admin/*'). Use Python's fnmatch module for pattern matching.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:14.704901+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:34.858452+01:00","closed_at":"2026-01-16T14:23:34.858452+01:00","close_reason":"All config options implemented in ASGIObservabilityMiddleware","dependencies":[{"issue_id":"observabilipy-c1y.2","depends_on_id":"observabilipy-c1y.1","type":"blocks","created_at":"2026-01-15T22:21:53.352221+01:00","created_by":"daemon"},{"issue_id":"observabilipy-c1y.2","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:04.531328+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.3","title":"Implement custom request_id_header configuration","description":"Add request_id_header parameter to middleware config (default: 'X-Request-ID'). The middleware should extract request IDs from this header and include them in logs/metrics attributes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:15.638691+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:34.866433+01:00","closed_at":"2026-01-16T14:23:34.866433+01:00","close_reason":"All config options implemented in ASGIObservabilityMiddleware","dependencies":[{"issue_id":"observabilipy-c1y.3","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:06.275328+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.4","title":"Implement log_requests and record_metrics toggles","description":"Add log_requests (bool, default True) and record_metrics (bool, default True) parameters. Allow users to enable/disable logging and metrics recording independently.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:16.506248+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:34.868142+01:00","closed_at":"2026-01-16T14:23:34.868142+01:00","close_reason":"All config options implemented in ASGIObservabilityMiddleware","dependencies":[{"issue_id":"observabilipy-c1y.4","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:07.563025+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.5","title":"Implement custom metric name configuration","description":"Add metric_names config with defaults for request_count ('http_requests_total') and request_duration ('http_request_duration_seconds'). Users can override these names.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:19.345948+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:34.869624+01:00","closed_at":"2026-01-16T14:23:34.869624+01:00","close_reason":"All config options implemented in ASGIObservabilityMiddleware","dependencies":[{"issue_id":"observabilipy-c1y.5","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:08.765594+01:00","created_by":"daemon"}]}
{"id":"observabilipy-c1y.6","title":"Implement path normalization for route parameters","description":"Add path_normalizer callback option to convert paths like '/users/123/orders/456' to '/users/{id}/orders/{id}'. Prevents label cardinality explosion in metrics. Provide default normalizers for common patterns.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:20.27242+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:20.27242+01:00","dependencies":[{"issue_id":"observabilipy-c1y.6","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:09.59975+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v","title":"Automatic Context Propagation","description":"Ensure request context flows automatically through async/sync code. This covers context injection at request boundaries, cleanup, isolation between concurrent requests, and integration with existing log_context() and get_log_context() APIs.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-15T22:20:53.362431+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:19.249236+01:00","closed_at":"2026-01-16T14:23:19.249236+01:00","close_reason":"All context propagation features implemented","dependencies":[{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-d8v.1","type":"blocks","created_at":"2026-01-15T22:21:31.70707+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-d8v.2","type":"blocks","created_at":"2026-01-15T22:21:35.421819+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-d8v.3","type":"blocks","created_at":"2026-01-15T22:21:35.703433+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-d8v.4","type":"blocks","created_at":"2026-01-15T22:21:39.566776+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-d8v.5","type":"blocks","created_at":"2026-01-15T22:21:39.864825+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v","depends_on_id":"observabilipy-f2x","type":"blocks","created_at":"2026-01-15T22:21:44.994274+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v.1","title":"Implement automatic context setup in middleware __call__","description":"Add automatic context injection at the start of each request in the ASGI middleware __call__ method. The middleware should set up request-scoped context (request_id, path, method, etc.) that will be available throughout the request lifecycle.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:04.578257+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:15.513889+01:00","closed_at":"2026-01-16T14:07:15.513889+01:00","close_reason":"Implemented context propagation and exception handling","dependencies":[{"issue_id":"observabilipy-d8v.1","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:58.177491+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v.2","title":"Implement context cleanup with try/finally","description":"Ensure context is properly cleaned up at the end of each request using try/finally pattern. This prevents context leakage between requests and ensures cleanup happens even if exceptions occur.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:06.47407+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:15.518056+01:00","closed_at":"2026-01-16T14:07:15.518056+01:00","close_reason":"Implemented context propagation and exception handling","dependencies":[{"issue_id":"observabilipy-d8v.2","depends_on_id":"observabilipy-d8v.1","type":"blocks","created_at":"2026-01-15T22:22:03.097242+01:00","created_by":"daemon"},{"issue_id":"observabilipy-d8v.2","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:59.099683+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v.3","title":"Add tests for concurrent request isolation","description":"Write tests that verify context isolation between concurrent requests. Use asyncio.gather() to run multiple requests simultaneously and verify each request sees only its own context values, not context from other concurrent requests.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:07.470479+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:15.521935+01:00","closed_at":"2026-01-16T14:07:15.521935+01:00","close_reason":"Implemented context propagation and exception handling","dependencies":[{"issue_id":"observabilipy-d8v.3","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:59.957132+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v.4","title":"Add tests for nested async call context preservation","description":"Write tests verifying that context is preserved through nested async calls. This includes testing that await chains, asyncio.create_task(), and nested coroutine calls all maintain access to the original request context.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:08.591392+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:15.527137+01:00","closed_at":"2026-01-16T14:07:15.527137+01:00","close_reason":"Implemented context propagation and exception handling","dependencies":[{"issue_id":"observabilipy-d8v.4","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:00.944222+01:00","created_by":"daemon"}]}
{"id":"observabilipy-d8v.5","title":"Document context propagation patterns","description":"Add documentation explaining context propagation behavior, including: how context flows through async code, best practices for accessing context in handlers, limitations and edge cases, and examples of proper usage patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T22:21:09.805629+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:23:19.211239+01:00","closed_at":"2026-01-16T14:23:19.211239+01:00","close_reason":"Context propagation documented via tests and code comments","dependencies":[{"issue_id":"observabilipy-d8v.5","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:01.893596+01:00","created_by":"daemon"}]}
{"id":"observabilipy-dcj","title":"Test Organization Improvements","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-15T15:15:49.080245+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:40:16.580045+01:00","closed_at":"2026-01-15T20:40:16.580045+01:00","close_reason":"Closed","dependencies":[{"issue_id":"observabilipy-dcj","depends_on_id":"observabilipy-dcj.1","type":"blocks","created_at":"2026-01-15T20:52:01.536484+01:00","created_by":"daemon"},{"issue_id":"observabilipy-dcj","depends_on_id":"observabilipy-dcj.2","type":"blocks","created_at":"2026-01-15T20:52:01.604361+01:00","created_by":"daemon"},{"issue_id":"observabilipy-dcj","depends_on_id":"observabilipy-dcj.3","type":"blocks","created_at":"2026-01-15T20:52:01.678143+01:00","created_by":"daemon"},{"issue_id":"observabilipy-dcj","depends_on_id":"observabilipy-dcj.4","type":"blocks","created_at":"2026-01-15T20:52:01.747675+01:00","created_by":"daemon"}]}
{"id":"observabilipy-dcj.1","title":"Split test_sqlite_log_storage.py by responsibility","description":"Split 487-line file into 3 focused files:\n- test_sqlite_log_storage_basic.py (core CRUD operations)\n- test_sqlite_log_storage_persistence.py (cross-instance persistence)\n- test_sqlite_log_storage_resilience.py (corrupted JSON handling)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T15:15:52.337259+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:23:29.747757+01:00","closed_at":"2026-01-15T15:23:29.747757+01:00","close_reason":"Test files split by responsibility"}
{"id":"observabilipy-dcj.2","title":"Split test_sqlite_metrics_storage.py by responsibility","description":"Split 362-line file into 3 focused files:\n- test_sqlite_metrics_storage_basic.py (core CRUD operations)\n- test_sqlite_metrics_storage_persistence.py (cross-instance persistence)\n- test_sqlite_metrics_storage_resilience.py (corrupted JSON handling)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T15:15:54.450123+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:23:29.75252+01:00","closed_at":"2026-01-15T15:23:29.75252+01:00","close_reason":"Test files split by responsibility"}
{"id":"observabilipy-dcj.3","title":"Reorganize test_sqlite_storage_sync.py by storage type","description":"Split 160-line file with mixed log/metrics sync tests into:\n- test_sqlite_log_storage_sync.py (log sync methods)\n- test_sqlite_metrics_storage_sync.py (metrics sync methods)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T15:15:56.927572+01:00","created_by":"philipphematty","updated_at":"2026-01-15T15:23:29.75628+01:00","closed_at":"2026-01-15T15:23:29.75628+01:00","close_reason":"Test files split by responsibility"}
{"id":"observabilipy-dcj.4","title":"Split e2e/conftest.py by concern","description":"Split 107-line conftest with mixed concerns into focused modules:\n- storage_fixtures.py (storage setup)\n- app_fixtures.py (FastAPI app, HTTP client)\n- policy_fixtures.py (retention policies)\nKeep conftest.py as thin aggregator.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-15T15:16:00.302705+01:00","created_by":"philipphematty","updated_at":"2026-01-15T20:40:16.574938+01:00","closed_at":"2026-01-15T20:40:16.574938+01:00","close_reason":"Closed"}
{"id":"observabilipy-f2x","title":"ASGI Auto-Instrumentation Middleware","description":"Core auto-instrumentation implementation for async frameworks (FastAPI, Starlette, Django ASGI, etc.).\n\nThis epic covers:\n- Core ASGI middleware class that wraps any ASGI app\n- Request logging (method, path, status, duration)\n- Request metrics (counter + histogram)\n- Request ID extraction/generation\n- Integration with existing log_context() for context propagation","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-15T22:20:45.968157+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:22:37.000763+01:00","closed_at":"2026-01-16T14:22:37.000763+01:00","close_reason":"All subtasks completed: ASGI middleware fully implemented","dependencies":[{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.1","type":"blocks","created_at":"2026-01-15T22:21:25.326585+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:25.362295+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.3","type":"blocks","created_at":"2026-01-15T22:21:25.397472+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.4","type":"blocks","created_at":"2026-01-15T22:21:25.42993+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.5","type":"blocks","created_at":"2026-01-15T22:21:25.461724+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.6","type":"blocks","created_at":"2026-01-15T22:21:25.49531+01:00","created_by":"daemon"},{"issue_id":"observabilipy-f2x","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:21:25.538768+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.1","title":"Define ASGIObservabilityMiddleware class skeleton","description":"Create the basic ASGI middleware class structure:\n- __init__ accepting app, log_storage, metrics_storage parameters\n- __call__ method signature for ASGI interface\n- Basic type hints and docstrings","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:05.849899+01:00","created_by":"philipphematty","updated_at":"2026-01-15T23:21:06.255724+01:00","closed_at":"2026-01-15T23:21:06.255724+01:00","close_reason":"Closed"}
{"id":"observabilipy-f2x.2","title":"Implement request timing and status capture","description":"Implement the core timing and response capture logic:\n- Wrap the ASGI send callable to capture status code\n- Measure request duration using time.perf_counter()\n- Handle streaming responses correctly\n- Capture response body size if available","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:06.726862+01:00","created_by":"philipphematty","updated_at":"2026-01-16T13:04:39.692686+01:00","closed_at":"2026-01-16T13:04:39.692686+01:00","close_reason":"Implemented wrapped send callable with status capture, body size accumulation, and duration timing","dependencies":[{"issue_id":"observabilipy-f2x.2","depends_on_id":"observabilipy-f2x.1","type":"blocks","created_at":"2026-01-15T22:21:37.306369+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.3","title":"Implement request logging with standard attributes","description":"Log each request with standard attributes:\n- http.method (GET, POST, etc.)\n- http.path (URL path)\n- http.status_code (response status)\n- http.duration_ms (request duration in milliseconds)\n- http.request_id (if available)\n- Use existing LogEntry model","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:07.823619+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:06.262498+01:00","closed_at":"2026-01-16T14:07:06.262498+01:00","close_reason":"Implemented ASGI middleware observability features","dependencies":[{"issue_id":"observabilipy-f2x.3","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:31.740652+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.4","title":"Implement request counter metric (http_requests_total)","description":"Add counter metric for total requests:\n- Metric name: http_requests_total\n- Labels: method, path, status\n- Increment on each request completion\n- Use existing MetricSample model","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:09.078343+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:06.270397+01:00","closed_at":"2026-01-16T14:07:06.270397+01:00","close_reason":"Implemented ASGI middleware observability features","dependencies":[{"issue_id":"observabilipy-f2x.4","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:31.776208+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.5","title":"Implement request histogram metric (http_request_duration_seconds)","description":"Add histogram metric for request duration:\n- Metric name: http_request_duration_seconds\n- Labels: method, path, status\n- Record duration in seconds\n- Note: actual histogram bucketing is exporter responsibility","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:09.899594+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:06.275098+01:00","closed_at":"2026-01-16T14:07:06.275098+01:00","close_reason":"Implemented ASGI middleware observability features","dependencies":[{"issue_id":"observabilipy-f2x.5","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:31.808314+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.6","title":"Implement request ID extraction from X-Request-ID header","description":"Extract or generate request ID:\n- Check X-Request-ID header in incoming request\n- Generate UUID if header not present\n- Make request ID available for logging and context\n- Optionally add request ID to response headers","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:10.831336+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:06.277468+01:00","closed_at":"2026-01-16T14:07:06.277468+01:00","close_reason":"Implemented ASGI middleware observability features","dependencies":[{"issue_id":"observabilipy-f2x.6","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:31.839007+01:00","created_by":"daemon"}]}
{"id":"observabilipy-f2x.7","title":"Integrate with log_context() for automatic context injection","description":"Integrate middleware with existing log_context():\n- Automatically inject request_id into log context\n- Inject other request attributes (method, path) if configured\n- Ensure context is properly scoped to request lifecycle\n- Handle async context propagation correctly","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:11.858191+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:06.279248+01:00","closed_at":"2026-01-16T14:07:06.279248+01:00","close_reason":"Implemented ASGI middleware observability features","dependencies":[{"issue_id":"observabilipy-f2x.7","depends_on_id":"observabilipy-f2x.2","type":"blocks","created_at":"2026-01-15T22:21:31.873409+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw","title":"Middleware Error Resilience","description":"Ensure the middleware never breaks the application. Covers exception handling, storage failure isolation, write timeouts, and proper exception chaining.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-15T22:20:51.977847+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:20:51.977847+01:00","dependencies":[{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-lrw.1","type":"blocks","created_at":"2026-01-15T22:21:29.362113+01:00","created_by":"daemon"},{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-lrw.2","type":"blocks","created_at":"2026-01-15T22:21:29.398858+01:00","created_by":"daemon"},{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-lrw.3","type":"blocks","created_at":"2026-01-15T22:21:29.433309+01:00","created_by":"daemon"},{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-lrw.4","type":"blocks","created_at":"2026-01-15T22:21:29.468007+01:00","created_by":"daemon"},{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-lrw.5","type":"blocks","created_at":"2026-01-15T22:21:29.500718+01:00","created_by":"daemon"},{"issue_id":"observabilipy-lrw","depends_on_id":"observabilipy-f2x","type":"blocks","created_at":"2026-01-15T22:21:35.700034+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw.1","title":"Implement exception logging with re-raise","description":"Log unhandled endpoint exceptions without swallowing them. The middleware must log errors but always re-raise to let the framework handle them.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T22:20:56.534961+01:00","created_by":"philipphematty","updated_at":"2026-01-16T14:07:15.530962+01:00","closed_at":"2026-01-16T14:07:15.530962+01:00","close_reason":"Implemented context propagation and exception handling","dependencies":[{"issue_id":"observabilipy-lrw.1","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:53.322725+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw.2","title":"Implement storage failure isolation","description":"Wrap all storage writes in try/except to prevent storage failures from breaking the application. Storage errors should be logged but never propagate to the application.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:01.258084+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:01.258084+01:00","dependencies":[{"issue_id":"observabilipy-lrw.2","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:54.284667+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw.3","title":"Implement configurable write timeout","description":"Add configurable timeout for storage writes to prevent blocking the request/response cycle. Default to a sensible timeout (e.g., 100ms) with ability to configure.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:06.584721+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:06.584721+01:00","dependencies":[{"issue_id":"observabilipy-lrw.3","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:55.206333+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw.4","title":"Implement proper exception context preservation","description":"Use 'raise ... from e' pattern to preserve exception context and create proper exception chains for debugging.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:12.260261+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:12.260261+01:00","dependencies":[{"issue_id":"observabilipy-lrw.4","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:56.157085+01:00","created_by":"daemon"}]}
{"id":"observabilipy-lrw.5","title":"Add stderr fallback when storage fails","description":"When storage writes fail, fall back to writing to stderr so observability data is not completely lost. This ensures logs/metrics can still be captured even when primary storage is unavailable.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:16.997551+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:16.997551+01:00","dependencies":[{"issue_id":"observabilipy-lrw.5","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:28:57.012787+01:00","created_by":"daemon"}]}
{"id":"observabilipy-pgz","title":"Refactor: Split test_in_memory_storage.py by storage type","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-15T10:42:17.384362+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:17:24.828765+01:00","closed_at":"2026-01-15T14:17:24.828765+01:00","close_reason":"Duplicate of observabilipy-2ph.5 (already part of Architecture Review epic)"}
{"id":"observabilipy-r51","title":"Add clear()/clear_sync() to in-memory storage classes","description":"## Problem\n\nTests in test_examples.py directly access internal _entries.clear() and _samples.clear() (lines 34, 147-148, 209-210, 246-247) instead of using public methods.\n\nAlso tests use len(storage._entries) instead of awaiting a count method (lines 215-216).\n\n## Solution\n\nAdd public methods to both InMemoryLogStorage and InMemoryMetricsStorage:\n\n- clear() - async method to clear all entries/samples\n- clear_sync() - sync method (for sync adapter variant)\n\n## Updates Required\n\n1. Update adapters/storage/in_memory.py:\n   - Add clear() async method to InMemoryLogStorage\n   - Add clear() async method to InMemoryMetricsStorage\n   - Add clear_sync() to sync variants if they exist\n\n2. Update tests/test_examples.py:\n   - Replace storage._entries.clear() with await storage.clear()\n   - Replace storage._samples.clear() with await storage.clear()\n   - Replace len(storage._entries) with await storage.count() or add a count() method if needed\n\n## Testing\n\nRun tests to verify no regressions:\nuv run pytest tests/test_examples.py -v","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T10:30:33.9433+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:17:36.716247+01:00","closed_at":"2026-01-15T14:17:36.716247+01:00","close_reason":"Work migrated to observabilipy-2ph.11 (hierarchical structure)"}
{"id":"observabilipy-sh1","title":"Add public registry merge API","description":"Add public methods to MappingRegistry so consumers don't need to access private _mappings attribute.\n\n## Problem\nConsumers (like sunsoric_backend) need to merge multiple registries, but currently must access private _mappings:\n```python\nfor event_name, mapper in other_reg._mappings.items():\n    registry.register(event_name, mapper)\n```\n\n## Solution\nAdd public methods to MappingRegistry:\n\n1. `merge(other: MappingRegistry) -\u003e None` - Copy all mappings from another registry\n2. `__len__() -\u003e int` - Return count of registered mappings\n\n## Acceptance Criteria\n- [ ] `merge()` copies all mappings from source registry\n- [ ] `merge()` raises ValueError on duplicate event names\n- [ ] `len(registry)` returns mapping count\n- [ ] Tests for both methods\n- [ ] Release new version\n\n## Related\n- sunsoric_backend issue: sunsoric_backend-3jx (blocked on this)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-11T21:37:57.758778+01:00","created_by":"philipphematty","updated_at":"2026-01-11T21:50:34.78962+01:00","closed_at":"2026-01-11T21:50:34.78962+01:00","close_reason":"Implemented merge() and __len__() methods"}
{"id":"observabilipy-t9t","title":"EventObservability.record() race condition under pytest-xdist","description":"## Problem\n\n`EventObservability.record()` has a race condition when called from sync code running inside an async context (like pytest-xdist workers). The method schedules writes as fire-and-forget tasks, returning before the write completes.\n\n## Root Cause\n\nIn `adapters/events.py`, the `_write_outputs()` method:\n\n```python\ndef _write_outputs(self, outputs):\n    try:\n        loop = asyncio.get_running_loop()\n    except RuntimeError:\n        # No running event loop - use asyncio.run() (sync context)\n        asyncio.run(self._write_outputs_async(outputs))\n    else:\n        # Inside a running event loop - schedule as a task\n        loop.create_task(self._write_outputs_async(outputs))  # \u003c-- FIRE AND FORGET!\n```\n\nWhen an event loop is detected, writes are scheduled as background tasks that complete *after* `record()` returns. This causes tests to check storage before writes complete.\n\n## Impact\n\n- **sunsoric_backend**: 10+ tests marked with `@pytest.mark.no_parallel` as workaround\n- Tests that verify event emission fail randomly under parallel execution\n- Manual `SyncEventObservability` wrapper created in test conftest.py\n\n## Proposed Solution\n\nAdd a `sync: bool = False` parameter to EventObservability:\n\n```python\nclass EventObservability:\n    def __init__(self, registry, log_storage, metrics_storage, *, sync: bool = False):\n        self._sync = sync\n        # ...\n\n    def _write_outputs(self, outputs):\n        if self._sync:\n            # Write directly to storage, bypassing async machinery\n            for output in outputs:\n                if isinstance(output, LogEntry):\n                    self._log_storage._entries.append(output)\n                elif isinstance(output, MetricSample):\n                    self._metrics_storage._samples.append(output)\n            return\n\n        # Existing async logic...\n```\n\nAlternative: Always use sync writes for InMemoryStorage implementations (detect by checking storage type).\n\n## Acceptance Criteria\n\n- [ ] `EventObservability(sync=True)` writes synchronously to storage\n- [ ] Tests can verify event emission immediately after `record()` returns\n- [ ] Existing async behavior preserved when `sync=False` (default)\n- [ ] Document when to use sync mode (testing, WSGI contexts)\n\n## Related\n\n- sunsoric_backend workaround: `SyncEventObservability` class in `tests/unit/conftest.py`\n- sunsoric_backend tests marked `@pytest.mark.no_parallel` as mitigation","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-15T00:13:31.417237+01:00","created_by":"philipphematty","updated_at":"2026-01-15T14:17:44.112127+01:00","closed_at":"2026-01-15T14:17:44.112127+01:00","close_reason":"Work migrated to observabilipy-2ph.14 (hierarchical structure)"}
{"id":"observabilipy-uua","title":"WSGI Auto-Instrumentation Middleware","description":"Sync equivalent of ASGI middleware for Flask, Django WSGI, Bottle, etc.\n\nThis middleware will automatically instrument any WSGI application with:\n- Request timing and status capture\n- Request logging (sync write)\n- Request metrics (sync write)\n- Thread-safe context propagation\n\nFollows patterns established by existing ASGI adapter (src/observabilipy/adapters/frameworks/asgi.py).\n\nTarget frameworks: Flask, Django WSGI, Bottle, Falcon, CherryPy, and any PEP 3333 compliant app.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-15T22:20:59.199849+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:20:59.199849+01:00","dependencies":[{"issue_id":"observabilipy-uua","depends_on_id":"observabilipy-f2x","type":"blocks","created_at":"2026-01-15T22:22:34.715916+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.1","title":"Define WSGIObservabilityMiddleware class skeleton","description":"Create the basic WSGIObservabilityMiddleware class structure:\n\n- `__init__(self, app, log_storage, metrics_storage)` accepting WSGI app and storage ports\n- `__call__(self, environ, start_response)` as the WSGI interface\n- Proper type hints using PEP 3333 types\n- Docstrings explaining usage\n\nThis establishes the foundation that other tasks build upon.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:06.064093+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:06.064093+01:00","dependencies":[{"issue_id":"observabilipy-uua.1","depends_on_id":"observabilipy-f2x.7","type":"blocks","created_at":"2026-01-15T22:29:10.533787+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.2","title":"Implement request timing and status capture (sync)","description":"Add timing and status capture to the middleware:\n\n- Capture request start time using time.perf_counter() or time.time()\n- Wrap start_response to intercept status code\n- Calculate request duration\n- Store timing data for use by logging and metrics tasks\n\nMust handle edge cases:\n- Streaming responses (iterator protocol)\n- Exception handling during response generation\n- Early connection close","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:22.168226+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:22.168226+01:00","dependencies":[{"issue_id":"observabilipy-uua.2","depends_on_id":"observabilipy-uua.1","type":"blocks","created_at":"2026-01-15T22:22:03.218057+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.3","title":"Implement request logging (sync write)","description":"Add request logging using sync storage writes:\n\n- Log request method, path, status, duration\n- Use LogEntry model from core\n- Call log_storage.write_sync() for thread-safe writes\n- Include relevant request attributes (user-agent, content-type, etc.)\n- Log at appropriate levels (INFO for success, WARN for 4xx, ERROR for 5xx)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:23.159757+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:23.159757+01:00","dependencies":[{"issue_id":"observabilipy-uua.3","depends_on_id":"observabilipy-uua.1","type":"blocks","created_at":"2026-01-15T22:22:04.764054+01:00","created_by":"daemon"},{"issue_id":"observabilipy-uua.3","depends_on_id":"observabilipy-uua.2","type":"blocks","created_at":"2026-01-15T22:22:27.557827+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.4","title":"Implement request metrics (sync write)","description":"Add request metrics using sync storage writes:\n\n- Record http_requests_total counter with method, path, status labels\n- Record http_request_duration_seconds histogram/summary\n- Use MetricSample model from core\n- Call metrics_storage.write_sync() for thread-safe writes\n- Follow Prometheus naming conventions","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:24.244925+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:24.244925+01:00","dependencies":[{"issue_id":"observabilipy-uua.4","depends_on_id":"observabilipy-uua.1","type":"blocks","created_at":"2026-01-15T22:22:05.692523+01:00","created_by":"daemon"},{"issue_id":"observabilipy-uua.4","depends_on_id":"observabilipy-uua.2","type":"blocks","created_at":"2026-01-15T22:22:28.376967+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.5","title":"Implement thread-safe context propagation","description":"Add thread-local context for request tracking:\n\n- Use threading.local() for per-request context\n- Store request_id, trace_id, span_id if present in headers\n- Make context accessible to application code\n- Clean up context after request completes\n- Consider contextvars as alternative for Python 3.7+\n\nThis enables applications to add custom attributes to logs/metrics.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:25.348378+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:25.348378+01:00","dependencies":[{"issue_id":"observabilipy-uua.5","depends_on_id":"observabilipy-uua.1","type":"blocks","created_at":"2026-01-15T22:22:07.474189+01:00","created_by":"daemon"}]}
{"id":"observabilipy-uua.6","title":"Add sync storage write utilities","description":"Create utility functions for sync storage operations:\n\n- Ensure write_sync() is available on storage ports\n- Add helper for batch writes if needed\n- Handle storage errors gracefully (don't crash request)\n- Consider rate limiting/buffering for high-traffic scenarios\n\nMay require updates to ports.py if write_sync() not already defined.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T22:21:26.973318+01:00","created_by":"philipphematty","updated_at":"2026-01-15T22:21:26.973318+01:00","dependencies":[{"issue_id":"observabilipy-uua.6","depends_on_id":"observabilipy-uua.1","type":"blocks","created_at":"2026-01-15T22:22:16.652404+01:00","created_by":"daemon"}]}
{"id":"observabilipy-w6j","title":"Architecture Review Findings (2026-01-16)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-16T14:37:02.073361+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:55:11.103203+01:00","closed_at":"2026-01-16T17:55:11.103203+01:00","close_reason":"All 8 architecture findings addressed (7 implemented, 1 deferred due to pytest-bdd constraints)","dependencies":[{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.1","type":"blocks","created_at":"2026-01-16T14:37:40.856764+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.2","type":"blocks","created_at":"2026-01-16T14:37:40.892848+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.3","type":"blocks","created_at":"2026-01-16T14:37:40.931484+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.4","type":"blocks","created_at":"2026-01-16T14:37:40.980786+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.5","type":"blocks","created_at":"2026-01-16T14:37:41.020639+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.6","type":"blocks","created_at":"2026-01-16T14:37:41.05787+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.7","type":"blocks","created_at":"2026-01-16T14:37:41.097732+01:00","created_by":"daemon"},{"issue_id":"observabilipy-w6j","depends_on_id":"observabilipy-w6j.8","type":"blocks","created_at":"2026-01-16T14:37:41.136436+01:00","created_by":"daemon"}]}
{"id":"observabilipy-w6j.1","title":"SQLiteStorageBase dual state machine (262 lines, 7 responsibilities)","description":"sqlite_base.py maintains separate async/sync connections that diverge for :memory: databases. Sync and async operations can't see each other's data. Suggested: Decouple sync/async into separate modules","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:07.145901+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.919847+01:00","closed_at":"2026-01-16T17:53:13.919847+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.2","title":"Async-to-sync bridge creates event loops per request","description":"WSGI adapter creates new asyncio event loop per request. Fragile under concurrent load. Consider pool-based approach or sync-native storage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:10.791985+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.924468+01:00","closed_at":"2026-01-16T17:53:13.924468+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.3","title":"ASGI endpoint error handling duplication","description":"20 lines duplicated between /metrics and /logs endpoints. Extract to _handle_endpoint() helper function","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:13.934041+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.927732+01:00","closed_at":"2026-01-16T17:53:13.927732+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.4","title":"WSGI endpoint structure duplication","description":"37 lines repeated across 3 endpoints. Create endpoint handler factory pattern","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:17.080572+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.930881+01:00","closed_at":"2026-01-16T17:53:13.930881+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.5","title":"Query parameter parsing scattered across adapters","description":"ASGI has extracted helper, WSGI repeats inline twice. Consolidate into shared module","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:20.113363+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.933618+01:00","closed_at":"2026-01-16T17:53:13.933618+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.6","title":"BDD middleware conftest.py god file","description":"tests/features/middleware/conftest.py is 801 lines with 73+ step functions. Split by concern: logging, metrics, config, context, wsgi, error handling","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:24.096204+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:54:01.466414+01:00","closed_at":"2026-01-16T17:54:01.466414+01:00","close_reason":"Cannot complete: pytest-bdd requires step definitions in conftest.py for discovery. Wildcard imports do not work. Requires different approach (possibly pytest-bdd step fixture registration)."}
{"id":"observabilipy-w6j.7","title":"test_wsgi_adapter.py scattered organization","description":"6 test classes mixing concerns. Consolidate edge cases into endpoint-specific classes","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:27.852847+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.935831+01:00","closed_at":"2026-01-16T17:53:13.935831+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-w6j.8","title":"Excessive pytest.xfail usage masks unimplemented features","description":"Replace with @pytest.mark.skip + issue references","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-16T14:37:31.329283+01:00","created_by":"philipphematty","updated_at":"2026-01-16T17:53:13.937789+01:00","closed_at":"2026-01-16T17:53:13.937789+01:00","close_reason":"Completed in architecture review remediation session"}
{"id":"observabilipy-xiu","title":"Event-Based Observability","description":"Epic for implementing event-based observability layer that decouples domain events from metrics/logs","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-09T11:37:02.408781+01:00","created_by":"philipphematty","updated_at":"2026-01-09T12:53:49.192964+01:00","closed_at":"2026-01-09T12:53:49.192964+01:00","close_reason":"Event-Based Observability epic complete. Implemented MappingRegistry, EventObservability adapter, event descriptor models, and BDD step definitions for all event features.","dependencies":[{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.1","type":"blocks","created_at":"2026-01-09T11:37:35.01438+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.2","type":"blocks","created_at":"2026-01-09T11:37:35.057368+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.3","type":"blocks","created_at":"2026-01-09T11:37:35.093981+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.4","type":"blocks","created_at":"2026-01-09T11:37:35.130936+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.5","type":"blocks","created_at":"2026-01-09T11:37:35.168533+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu","depends_on_id":"observabilipy-xiu.6","type":"blocks","created_at":"2026-01-09T11:37:35.2044+01:00","created_by":"daemon"}]}
{"id":"observabilipy-xiu.1","title":"Add pytest-bdd dev dependency","description":"Add pytest-bdd to dev dependencies in pyproject.toml for BDD testing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:05.422351+01:00","created_by":"philipphematty","updated_at":"2026-01-09T12:10:13.978316+01:00","closed_at":"2026-01-09T12:10:13.978316+01:00","close_reason":"Closed"}
{"id":"observabilipy-xiu.2","title":"Create MappingRegistry (register, lookup, validate)","description":"Create MappingRegistry class that registers event-to-metric/log descriptors, validates descriptor fields/labels exist on event class, and provides lookup functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:08.617809+01:00","created_by":"philipphematty","updated_at":"2026-01-09T12:10:13.980439+01:00","closed_at":"2026-01-09T12:10:13.980439+01:00","close_reason":"Closed"}
{"id":"observabilipy-xiu.3","title":"Implement descriptor validation logic","description":"Implement validation that checks descriptor fields/labels exist on event class","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:12.113476+01:00","created_by":"philipphematty","updated_at":"2026-01-09T11:57:47.967296+01:00","closed_at":"2026-01-09T11:57:47.967296+01:00","close_reason":"Merged into MappingRegistry and EventObservability adapter","dependencies":[{"issue_id":"observabilipy-xiu.3","depends_on_id":"observabilipy-xiu.2","type":"blocks","created_at":"2026-01-09T11:37:38.563336+01:00","created_by":"daemon"}]}
{"id":"observabilipy-xiu.4","title":"Implement event-to-observability recording logic","description":"Implement logic to convert events to metrics/logs based on descriptors","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:15.016979+01:00","created_by":"philipphematty","updated_at":"2026-01-09T11:57:50.763259+01:00","closed_at":"2026-01-09T11:57:50.763259+01:00","close_reason":"Merged into MappingRegistry and EventObservability adapter","dependencies":[{"issue_id":"observabilipy-xiu.4","depends_on_id":"observabilipy-xiu.2","type":"blocks","created_at":"2026-01-09T11:37:38.694641+01:00","created_by":"daemon"}]}
{"id":"observabilipy-xiu.5","title":"Create EventObservability adapter (sync/async, uses registry)","description":"Create EventObservability adapter that handles sync/async contexts using event loop detection pattern, uses MappingRegistry to record events as metrics/logs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:17.421447+01:00","created_by":"philipphematty","updated_at":"2026-01-09T12:31:41.825147+01:00","closed_at":"2026-01-09T12:31:41.825147+01:00","close_reason":"Implemented MappingRegistry and EventObservability adapter with sync/async support. All tests passing.","dependencies":[{"issue_id":"observabilipy-xiu.5","depends_on_id":"observabilipy-xiu.2","type":"blocks","created_at":"2026-01-09T11:00:10.025094Z","created_by":"auto-update"}]}
{"id":"observabilipy-xiu.6","title":"BDD step definitions for all event features","description":"Create step definitions for event_descriptors.feature, event_recording.feature, and event_validation.feature","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T11:37:20.332965+01:00","created_by":"philipphematty","updated_at":"2026-01-09T12:42:37.283092+01:00","closed_at":"2026-01-09T12:42:37.283092+01:00","close_reason":"Implemented BDD step definitions for all event features (event_mappings.feature, event_recording.feature, event_validation.feature). All 10 scenarios pass.","dependencies":[{"issue_id":"observabilipy-xiu.6","depends_on_id":"observabilipy-xiu.1","type":"blocks","created_at":"2026-01-09T11:37:45.549034+01:00","created_by":"daemon"},{"issue_id":"observabilipy-xiu.6","depends_on_id":"observabilipy-xiu.5","type":"blocks","created_at":"2026-01-09T11:37:45.598959+01:00","created_by":"daemon"}]}
